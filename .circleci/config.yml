workflow:
  version: 2
  build_deploy:
    jobs:
      - build
      - deploy-qa:
        filters:
          branches:
            only: develop
      - deploy-master:
        filters:
          branches:
            only: develop
      
jobs:
  build:
    docker:
      - image: circleci/python:3.7.6
  deploy-qa:
    working_directory: ~/controlCamionesApi
    environment:
      PYTHONDONTWRITEBYTECODE: 1
      PYTHONUNBUFFERED: 1
    steps:
      - checkout
      - run: ssh -oStrictHostKeyChecking=no -v ohl@157.245.237.33 "/home/ohl/controlCamionesApi/.circleci/deploy_app_qa.sh"

  deploy-master:
    working_directory: ~/controlCamionesApi
    environment:
      PYTHONDONTWRITEBYTECODE: 1
      PYTHONUNBUFFERED: 1
    steps:
      - checkout
      - run: ssh -oStrictHostKeyChecking=no -v ohl@157.245.237.33 "/home/ohl/controlCamionesApi/.circleci/deploy_app_prod.sh"



